jQuery(function(e){function a(a){var t={action:"add_gift_card_amount",amount:e("#gift_card-amount").val(),product_id:e("#post_ID").val()},o=a.closest("span.add-new-amount-section");o.block({message:null,overlayCSS:{background:"#fff url("+ywgc_data.loader+") no-repeat center",opacity:.6}}),e.post(ywgc_data.ajax_url,t,function(a){1==a.code&&e("p._gift_card_amount_field").replaceWith(a.value),e("#gift_card-amount").val(""),e("#gift_card-amount").selectionStart=0,e("#gift_card-amount").selectionEnd=0,e("#gift_card-amount").focus(),o.unblock()})}e(document).on("click","a.remove-amount",function(a){a.preventDefault();var t={action:"remove_gift_card_amount",amount:e(this).closest("span.variation-amount").find('input[name="gift-card-amounts[]"]').val(),product_id:e("#post_ID").val()},o=e(this).closest("span.variation-amount");o.block({message:null,overlayCSS:{background:"#fff url("+ywgc_data.loader+") no-repeat center",opacity:.6}}),e.post(ywgc_data.ajax_url,t,function(e){1==e.code&&o.remove(),o.unblock()})}),e(document).on("click","a.add-new-amount",function(t){t.preventDefault(),a(e(this))}),e(document).on("keypress","input#gift_card-amount",function(t){13===event.which&&(t.preventDefault(),e(this).attr("disabled","disabled"),a(e(this)),e(this).removeAttr("disabled"))}),e(document).on("change",'input[name="ywgc_physical_gift_card"]',function(a){var t=e(this).prop("checked");e('input[name="_virtual"]').prop("checked",!t)}),e(document).on("click",".image-gallery-reset",function(a){a.preventDefault(),e("#ywgc-card-header-image img").remove(),e("#ywgc_product_image_id").val(0)}),e(document).on("click",".image-gallery-chosen",function(a){a.preventDefault();var t,o=e(this).attr("name")+"_id";if(t)t.open();else{var i=[new wp.media.controller.Library({library:wp.media.query(),multiple:!1,title:ywgc_data.choose_image_text,priority:20,filterable:"uploaded"})];(t=wp.media.frames.downloadable_file=wp.media({title:ywgc_data.choose_image_text,library:{type:""},button:{text:ywgc_data.choose_image_text},multiple:!1,states:i})).on("select",function(){e("#ywgc-card-header-image img").remove();var a=t.state().get("selection").first().toJSON();e("#ywgc-card-header-image").prepend('<img width="80" src="'+a.url+'" />'),e("#"+o).val(a.id),e(".plugin-option .upload_img_url").trigger("change")}),t.open()}}),e("body .ywgc_order_sold_as_gift_card").each(function(){e(this).parent("td").find(".wc-order-item-name").hide()}),e("._manage_stock_field").addClass("show_if_gift-card"),void 0!==jQuery.fn.datepicker&&e(".ywgc-expiration-date-picker").datepicker({dateFormat:ywgc_data.date_format,minDate:1,maxDate:"+1Y"})});
