!function(e){if("undefined"!=typeof ywgc_data){e(document).on("ywgc-picture-changed",function(t,a,c){e(".ywgc-template-design").remove(),e(".ywgc-design-type").remove(),e("form.cart").append('<input type="hidden" class="ywgc-design-type" name="ywgc-design-type" value="'+a+'">'),e("form.cart").append('<input type="hidden" class="ywgc-template-design" name="ywgc-template-design" value="'+c+'">')}),e(function(){e(".datepicker").datepicker({dateFormat:ywgc_data.date_format,minDate:1,maxDate:"+1Y"}),e(".ywgc-choose-design-preview .ywgc-design-list li:first-child .ywgc-preset-image img").click()}),l();var t=e(".product-type-gift-card .woocommerce-product-gallery__image a"),a=e(".product-type-gift-card .woocommerce-product-gallery__image--placeholder");e(".ywgc-preset-image.ywgc-default-product-image img").addClass("selected_design_image"),e(document).on("click","form.gift-cards_form.cart .ywgc-preset-image img",function(c){c.preventDefault();var i=e(this).parent().data("design-id");if(e(".ywgc-preset-image img").removeClass("selected_design_image"),e(this).addClass("selected_design_image"),e(document).trigger("ywgc-picture-changed",["template",i]),e(this).hasClass("selected_design_image")){var n=e(this).parent().data("design-url"),o='<img src="'+n+'" class="wp-post-image size-full" alt="" data-caption="" data-src="'+n+'" data-large_image="'+n+'" data-large_image_width="1024" data-large_image_height="1024" sizes="(max-width: 600px) 100vw, 600px" '+e(this).attr("srcset")+'width="600" height="600">';0!=t.length?e(".product-type-gift-card .woocommerce-product-gallery__image a").html(o):(e(".woocommerce-product-gallery__image--placeholder img").remove,a.html(o))}}),e(document).on("click",".ywgc-preset-image img",function(t){t.preventDefault();var a=e(this).parent().data("design-id");e(".ywgc-preset-image img").removeClass("selected_design_image"),e(".ywgc-preset-image").removeClass("selected_image_parent"),e(this).addClass("selected_design_image"),e(this).parent().addClass("selected_image_parent"),e(document).trigger("ywgc-picture-changed",["template",a])}),e(document).on("click","a.ywgc-show-giftcard",function(){return e(".ywgc_enter_code").slideToggle(300,function(){e(".yith_wc_gift_card_blank_brightness").length||(e(".ywgc_enter_code").find(":input:eq( 0 )").focus(),e(".ywgc_enter_code").keyup(function(t){13===t.keyCode&&e("button.ywgc_apply_gift_card_button").click()}))}),!1}),e("button.ywgc-do-edit").css("display","inline"),e(document).on("input","#ywgc-edit-message",function(t){e(".ywgc-card-message").html(e("#ywgc-edit-message").val())}),e(document).on("change",".gift-cards-list select",function(e){l()}),e(document).on("click","a.customize-gift-card",function(t){t.preventDefault(),e("div.summary.entry-summary").after('<div class="ywgc-customizer"></div>')}),e(".variations_form.cart").on("found_variation",function(t,a){if(void 0!==a){var c=""!=a.price_html?e(a.price_html).html():e(".product-type-variable").find(".woocommerce-Price-amount.amount").first().html();i=c,e("div.ywgc-card-amount span.amount").html(i)}var i}),e(document).on("click","button.ywgc-apply-edit",function(t){var a=e(this),c=a.closest("div.ywgc-gift-card-content"),i=c.find('input[name="ywgc-edit-sender"]').val(),n=c.find('input[name="ywgc-edit-recipient"]').val(),o=c.find('textarea[name="ywgc-edit-message"]').val(),d=c.find('input[name="ywgc-item-id"]').val(),r=c.find('input[name="ywgc-gift-card-id"]'),s=r.val();if(a.hasClass("apply")){var g={action:"edit_gift_card",gift_card_id:s,item_id:d,sender:i,recipient:n,message:o};c.block({message:null,overlayCSS:{background:"#fff url("+ywgc_data.loader+") no-repeat center",opacity:.6}}),e.post(ywgc_data.ajax_url,g,function(e){e.code>0&&(c.find("span.ywgc-sender").text(i),c.find("span.ywgc-recipient").text(n),c.find("span.ywgc-message").text(o),2==e.code&&r.val(e.values.new_id)),c.unblock(),u(a,!1)})}}),e(document).on("click","button.ywgc-cancel-edit",function(t){u(e(this),!1)}),e(document).on("click","button.ywgc-do-edit",function(t){u(e(this),!0)}),e(document).on("click",".ywgc-gift-card-content a.edit-details",function(t){t.preventDefault(),e(this).addClass("ywgc-hide"),e("div.ywgc-gift-card-details").toggleClass("ywgc-hide")}),e('.ywgc-single-recipient input[name="ywgc-recipient-email[]"]').each(function(t,a){e(this).on("input",function(){e(this).closest(".ywgc-single-recipient").find(".ywgc-bad-email-format").remove()})}),e(document).on("submit",".gift-cards_form",function(t){var a=!0;e('.ywgc-single-recipient input[name="ywgc-recipient-email[]"]').each(function(t,c){var i;e(this).val()&&(i=e(this).val(),!new RegExp("^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$","i").test(i))&&(e(this).closest(".ywgc-single-recipient").find(".ywgc-bad-email-format").remove(),e(this).after('<span class="ywgc-bad-email-format">'+ywgc_data.email_bad_format+"</span>"),a=!1)}),a||t.preventDefault()}),e(document).on("click","a.ywgc-remove-gift-card ",function(t){t.preventDefault();var a=e(t.currentTarget).parents("table"),n=e(t.currentTarget).data("gift-card-code");c(a);var d={security:ywgc_data.gift_card_nonce,code:n,action:"ywgc_remove_gift_card_code"};e.ajax({type:"POST",url:ywgc_data.ajax_url,data:d,dataType:"html",success:function(t){o(t),e(document.body).trigger("removed_gift_card"),i(a)},complete:function(){m()}})}),e(document).on("click","button.ywgc_apply_gift_card_button",function(t){t.preventDefault();var a=e(this).closest("div.ywgc_enter_code");c(a);var n=a.find('input[ name="gift_card_code" ]'),d=n.val(),r={security:ywgc_data.gift_card_nonce,code:d,action:"ywgc_apply_gift_card_code"};e.ajax({type:"POST",url:ywgc_data.ajax_url,data:r,dataType:"html",success:function(t){o(t),e(document.body).trigger("applied_gift_card")},complete:function(){i(a),n.val(""),m()}})});var c=function(e){e.addClass("processing").block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},i=function(e){e.removeClass("processing").unblock()},n=function(e){return ywgc_data.wc_ajax_url.toString().replace("%%endpoint%%",e)},o=function(t){e(".woocommerce-error, .woocommerce-message").remove(),e(ywgc_data.notice_target).after(t),e(".ywgc_have_code").length&&e(".ywgc_enter_code").slideUp("300")};e(document).on("qv_loader_stop yit_quick_view_loaded flatsome_quickview",function(){l()}),e(document).on("click","button.yith-add-new-gc-my-account-button",function(t){t.preventDefault(),e(this).parent().prev(".form-link-gift-card-to-user").toggle("slow")});var d=e(".ywgc-recipient-name input");d.on("change keyup",function(t){t.preventDefault();var a=d.val();e(".ywgc-form-preview-to-content").text(a)});var r=e(".ywgc-sender-name input");r.on("change keyup",function(t){t.preventDefault();var a=r.val();e(".ywgc-form-preview-from-content").text(a)});var s=e(".ywgc-message textarea");s.on("change keyup",function(t){t.preventDefault();var a=s.val();e(".ywgc-form-preview-message").text(a)})}function g(t){e("button.gift_card_add_to_cart_button").attr("disabled",!t)}function l(){var t=e("button.ywgc-amount-buttons"),a=e("input.ywgc-amount-buttons"),c=e("button.ywgc-amount-buttons:first");c.addClass("selected_button"),c.hasClass("selected_button")&&e("input.ywgc-amount-buttons:first").attr("name","gift_amounts"),e(".ywgc-form-preview-amount").text(c.data("wc-price")),t.on("click",function(c){c.preventDefault(),t.removeClass("selected_button"),a.removeClass("selected_button"),a.removeAttr("name"),e(this).addClass("selected_button"),e(this).next().addClass("selected_button")});var i=c.data("wc-price");t.on("click",function(c){c.preventDefault(),a.removeAttr("name"),t.data("price")?(g(!0),i=e("input.selected_button").data("wc-price"),e("input.selected_button").attr("name","gift_amounts")):g(!1),function(t){e(".ywgc-form-preview-amount").text(t)}(i)})}function u(t,a){var c=e(t).closest("div.ywgc-gift-card-content"),i=c.find("div.ywgc-gift-card-edit-details"),n=c.find("div.ywgc-gift-card-details");a?(i.removeClass("ywgc-hide"),i.addClass("ywgc-show"),n.removeClass("ywgc-show"),n.addClass("ywgc-hide")):(i.removeClass("ywgc-show"),i.addClass("ywgc-hide"),n.removeClass("ywgc-hide"),n.addClass("ywgc-show"))}function m(){c(e("div.cart_totals")),e.ajax({url:n("get_cart_totals"),dataType:"html",success:function(t){e("div.cart_totals").replaceWith(t)}}),e(document.body).trigger("update_checkout")}}(jQuery);
