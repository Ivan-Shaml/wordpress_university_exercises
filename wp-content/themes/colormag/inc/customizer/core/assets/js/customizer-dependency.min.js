!function(s){"use strict";var u=wp.customize,o={controls:{},init:function(){var n=this;n.handleDependency(),n.hideEmptySections(),u.bind("change",function(o,e){n.hasDependentControls(o.id)&&(n.handleDependency(),n.hideEmptySections())})},handleDependency:function(){var i=this,o=u.get();i.checked_controls={},_.each(o,function(o,e){var n=u.control(e);i.checkControlVisibility(n,e)})},checkControlVisibility:function(o,e){var n=u.get();if(!_.isUndefined(o)&&void 0!==ColorMagCustomizerControlsToggle[e]){var i=!1,r=ColorMagCustomizerControlsToggle[e],t=_.isUndefined(r.conditions)?r:r.conditions,s=_.isUndefined(r.operator)?"AND":r.operator;void 0!==t&&(i=this.checkDependency(t,n,s),(this.checked_controls[e]=i)?o.container.removeClass("colormag-hide"):o.container.addClass("colormag-hide"))}},checkDependency:function(o,c,l){var d=this,g=!0,C=!1,e=o[0];if(_.isString(e)){var n,i=o[1],r=o[2];if(!_.isUndefined(ColorMagCustomizerControlsToggle[e])){o=_.isUndefined(ColorMagCustomizerControlsToggle[e].conditions)?ColorMagCustomizerControlsToggle[e]:ColorMagCustomizerControlsToggle[e].conditions;var t=_.isUndefined(ColorMagCustomizerControlsToggle[e].operator)?"AND":ColorMagCustomizerControlsToggle[e].operator;if(!_.isUndefined(o))if(d.checkDependency(o,c,t))u.control(e).container.removeClass("colormag-hide");else if(g=!(C=!0),"AND"==l)return}_.isUndefined(c[e])||C||!g||(n=c[e],g=d.compareValues(n,i,r))}else _.isArray(e)&&(s.each(o,function(o,e){var n=e[0],i=e[1],r=e[2],t=_.isUndefined(c[n])?"":c[n];if(void 0!==ColorMagCustomizerControlsToggle[n]){var s=_.isUndefined(ColorMagCustomizerControlsToggle[n].conditions)?ColorMagCustomizerControlsToggle[n]:ColorMagCustomizerControlsToggle[n].conditions,a=_.isUndefined(ColorMagCustomizerControlsToggle[n].operator)?"AND":ColorMagCustomizerControlsToggle[n].operator;if(!_.isUndefined(s))if(d.checkDependency(s,c,a))g=!0,u.control(n).container.removeClass("colormag-hide");else if(g=!1,"AND"==l)return}else g=!0;if(g)if("AND"==l){if(!d.compareValues(t,i,r))return g=!1}else g=!!d.compareValues(t,i,r)&&(C=!0)}),C&&"OR"==l&&(g=!0));return g},compareValues:function(o,e,n){var i=!1;switch(e){case"===":i=o===n;break;case">":i=n<o;break;case"<":i=o<n;break;case"<=":i=o<=n;break;case">=":i=n<=o;break;case"!=":i=o!=n;break;case"empty":var r=_.clone(o);i=_.isObject(r)||_.isArray(r)?(_.each(r,function(o,e){_.isEmpty(o)&&delete r[e]}),!!_.isEmpty(r)):!(!_.isNull(r)&&""!=r);break;case"not_empty":r=_.clone(o);(_.isObject(r)||_.isArray(r))&&_.each(r,function(o,e){_.isEmpty(o)&&delete r[e]}),i=!_.isEmpty(r);break;case"contains":_.isArray(o)&&-1!==s.inArray(n,o)&&(i=!0);break;default:i=_.isArray(n)?!_.isEmpty(n)&&!_.isEmpty(o)&&_.contains(n,o):o==n}return i},hideEmptySections:function(){s("ul.accordion-section.control-section-colormag_section").each(function(){var o=s(this).attr("id"),e=!1,n=s(this).find(" > .customize-control");0<n.length&&(n.each(function(){s(this).hasClass("colormag-hide")||"none"==s(this).css("display")||(e=!0)}),e?s('.control-section[aria-owns="'+o+'"]').removeClass("colormag-hide"):s('.control-section[aria-owns="'+o+'"]').addClass("colormag-hide"))})},hasDependentControls:function(r){var t=!1;return s.each(ColorMagCustomizerControlsToggle,function(o,e){if(_.isUndefined(e.conditions)){var n=e[0];if(r==n)return void(t=!0)}else{var i=e.conditions;s.each(i,function(o,e){var n=e[0];r!=n||(t=!0)})}}),t}};s(function(){o.init()})}(jQuery);